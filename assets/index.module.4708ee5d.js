var A=Object.defineProperty;var l=(n,e)=>A(n,"name",{value:e,configurable:!0});import{$ as R,_ as y}from"./index.module.91792b7b.js";import{r}from"./index.e35787a0.js";import{$ as m,b as h}from"./index.module.4248e7a2.js";import{$ as O,c as K}from"./index.module.f7f81d97.js";import{R as N}from"./index.30c3bc24.js";function H(n,e=globalThis==null?void 0:globalThis.document){const t=m(n);r.exports.useEffect(()=>{const s=l(o=>{o.key==="Escape"&&t(o)},"handleKeyDown");return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)},[t,e])}l(H,"$addc16e1bbe58fd0$export$3a72a57244d6e765");const x="dismissableLayer.update",M="dismissableLayer.pointerDownOutside",X="dismissableLayer.focusOutside";let C;const F=r.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),j=r.exports.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:v,onInteractOutside:u,onDismiss:f,...p}=n,c=r.exports.useContext(F),[d,W]=r.exports.useState(null),b=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,B]=r.exports.useState({}),S=R(e,i=>W(i)),D=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),k=D.indexOf(_),P=d?D.indexOf(d):-1,U=c.layersWithOutsidePointerEventsDisabled.size>0,g=P>=k,z=G(i=>{const $=i.target,T=[...c.branches].some(E=>E.contains($));!g||T||(a==null||a(i),u==null||u(i),i.defaultPrevented||f==null||f())},b),w=J(i=>{const $=i.target;[...c.branches].some(E=>E.contains($))||(v==null||v(i),u==null||u(i),i.defaultPrevented||f==null||f())},b);return H(i=>{P===c.layers.size-1&&(o==null||o(i),!i.defaultPrevented&&f&&(i.preventDefault(),f()))},b),r.exports.useEffect(()=>{if(!!d)return s&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(C=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),L(),()=>{s&&c.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=C)}},[d,b,s,c]),r.exports.useEffect(()=>()=>{!d||(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),L())},[d,c]),r.exports.useEffect(()=>{const i=l(()=>B({}),"handleUpdate");return document.addEventListener(x,i),()=>document.removeEventListener(x,i)},[]),r.exports.createElement(O.div,y({},p,{ref:S,style:{pointerEvents:U?g?"auto":"none":void 0,...n.style},onFocusCapture:h(n.onFocusCapture,w.onFocusCapture),onBlurCapture:h(n.onBlurCapture,w.onBlurCapture),onPointerDownCapture:h(n.onPointerDownCapture,z.onPointerDownCapture)}))}),q=r.exports.forwardRef((n,e)=>{const t=r.exports.useContext(F),s=r.exports.useRef(null),o=R(e,s);return r.exports.useEffect(()=>{const a=s.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),r.exports.createElement(O.div,y({},n,{ref:o}))});function G(n,e=globalThis==null?void 0:globalThis.document){const t=m(n),s=r.exports.useRef(!1),o=r.exports.useRef(()=>{});return r.exports.useEffect(()=>{const a=l(u=>{if(u.target&&!s.current){let p=function(){I(M,t,f,{discrete:!0})};l(p,"handleAndDispatchPointerDownOutsideEvent");const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=p,e.addEventListener("click",o.current,{once:!0})):p()}s.current=!1},"handlePointerDown"),v=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(v),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}l(G,"$5cb92bef7577960e$var$usePointerDownOutside");function J(n,e=globalThis==null?void 0:globalThis.document){const t=m(n),s=r.exports.useRef(!1);return r.exports.useEffect(()=>{const o=l(a=>{a.target&&!s.current&&I(X,t,{originalEvent:a},{discrete:!1})},"handleFocus");return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}l(J,"$5cb92bef7577960e$var$useFocusOutside");function L(){const n=new CustomEvent(x);document.dispatchEvent(n)}l(L,"$5cb92bef7577960e$var$dispatchUpdate");function I(n,e,t,{discrete:s}){const o=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),s?K(o,a):o.dispatchEvent(a)}l(I,"$5cb92bef7577960e$var$handleAndDispatchCustomEvent");const ne=j,se=q,oe=r.exports.forwardRef((n,e)=>{var t;const{container:s=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...o}=n;return s?N.createPortal(r.exports.createElement(O.div,y({},o,{ref:e})),s):null});export{oe as $,j as a,se as b,ne as c};
//# sourceMappingURL=index.module.4708ee5d.js.map
